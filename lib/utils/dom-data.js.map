{"version":3,"sources":["../../js/utils/dom-data.js"],"names":["getData","hasData","removeData","elData","elIdAttr","Date","now","el","id","Object","keys","length","e","removeAttribute"],"mappings":";;;;;QAyBgBA,O,GAAAA,O;QAoBAC,O,GAAAA,O;QAeAC,U,GAAAA,U;;AAnDhB;;AAEA;AACA;AACA;AACA,IAAIC,SAAS,EAAb;;AAEA;AAhBA;;;;;;;;;AAiBA,IAAMC,WAAW,qBAAqBC,KAAKC,GAAL,EAAtC;;AAEA;;;;;;AAMO,SAASN,OAAT,CAAiBO,EAAjB,EAAqB;AACxB,QAAIC,KAAKD,GAAGH,QAAH,CAAT;;AAEA,QAAI,CAACI,EAAL,EAAS;AACLA,aAAKD,GAAGH,QAAH,IAAe,oBAApB;AACH;;AAED,QAAI,CAACD,OAAOK,EAAP,CAAL,EAAiB;AACbL,eAAOK,EAAP,IAAa,EAAb;AACH;;AAED,WAAOL,OAAOK,EAAP,CAAP;AACH;;AAED;;;;;;AAMO,SAASP,OAAT,CAAiBM,EAAjB,EAAqB;AACxB,QAAMC,KAAKD,GAAGH,QAAH,CAAX;;AAEA,QAAI,CAACI,EAAD,IAAO,CAACL,OAAOK,EAAP,CAAZ,EAAwB;AACpB,eAAO,KAAP;AACH;;AAED,WAAO,CAAC,CAACC,OAAOC,IAAP,CAAYP,OAAOK,EAAP,CAAZ,EAAwBG,MAAjC;AACH;;AAED;;;;;AAKO,SAAST,UAAT,CAAoBK,EAApB,EAAwB;AAC3B,QAAMC,KAAKD,GAAGH,QAAH,CAAX;;AAEA,QAAI,CAACI,EAAL,EAAS;AACL;AACH;;AAED;AACA,WAAOL,OAAOK,EAAP,CAAP;;AAEA;AACA,QAAI;AACA,eAAOD,GAAGH,QAAH,CAAP;AACH,KAFD,CAEE,OAAOQ,CAAP,EAAU;AACR,YAAIL,GAAGM,eAAP,EAAwB;AACpBN,eAAGM,eAAH,CAAmBT,QAAnB;AACH,SAFD,MAEO;AACH;AACAG,eAAGH,QAAH,IAAe,IAAf;AACH;AACJ;AACJ","file":"dom-data.js","sourcesContent":["/**\n * @file dom-data.js\n * @author yuhui06@baidu.com\n * @date 2017/11/3\n * @desc\n *      1) è¿™æ˜¯ä¸€ä¸ªç¥å¥‡çš„æ–¹æ³•ï¼Œçœ‹å¥½äº†ï¼Œæœ€å¥½åˆ«çœ¨çœ¼ğŸ˜‰\n *      2) è¿™é‡Œæ²¡æœ‰ setData æ–¹æ³•ï¼Œåªè´Ÿè´£å–æ•°æ®å°±è¡Œäº†ã€‚æˆ‘ä»¬å¾€å–å›æ¥çš„æ•°æ®é‡Œå¡ä¸œè¥¿ï¼Œè‡ªç„¶å°±å­˜èµ·æ¥äº†\n */\n\nimport {newGUID} from './guid';\n\n// æ‰€æœ‰çš„æ•°æ®ä¼šå­˜åœ¨è¿™é‡Œ\n// æˆ‘ä»¬å¯ä»¥å°†æ•°æ®ä¸ DOM å…ƒç´ ç»‘å®šï¼Œä½†åˆä¸æ˜¯ç›´æ¥å°†æ•°æ®æ”¾åœ¨å®ƒä¸Šé¢\n// eg. Event listeners æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ç»‘å®šçš„\nlet elData = {};\n\n// æ¯æ¬¡å½“ç„¶è¦å­˜åœ¨ä¸ä¸€æ ·çš„åœ°æ–¹\nconst elIdAttr = 'larkplayer_data_' + Date.now();\n\n/**\n * è·å– DOM å…ƒç´ ä¸Šçš„æ•°æ®\n *\n * @param {Element} el è·å–è¯¥å…ƒç´ ä¸Šçš„æ•°æ®\n * @return {Object} æƒ³è¦çš„æ•°æ®\n */\nexport function getData(el) {\n    let id = el[elIdAttr];\n\n    if (!id) {\n        id = el[elIdAttr] = newGUID();\n    }\n\n    if (!elData[id]) {\n        elData[id] = {};\n    }\n\n    return elData[id];\n}\n\n/**\n * åˆ¤æ–­ä¸€ä¸ªå…ƒç´ ä¸Šæ˜¯å¦æœ‰æˆ‘ä»¬å­˜çš„æ•°æ®\n *\n * @param {Element} el å°±æ˜¯è¦çœ‹è¿™ä¸ªå…ƒç´ ä¸Šæœ‰æ²¡æœ‰æˆ‘ä»¬ä¹‹å‰å­˜çš„æ•°æ®\n * @return {boolean} å…ƒç´ ä¸Šæ˜¯å¦å­˜æœ‰æ•°æ®\n */\nexport function hasData(el) {\n    const id = el[elIdAttr];\n\n    if (!id || !elData[id]) {\n        return false;\n    }\n\n    return !!Object.keys(elData[id]).length;\n}\n\n/**\n * åˆ é™¤æˆ‘ä»¬ä¹‹å‰åœ¨å…ƒç´ ä¸Šå­˜æ”¾çš„æ•°æ®\n *\n * @param {Element} el å®¿ä¸»å…ƒç´ \n */\nexport function removeData(el) {\n    const id = el[elIdAttr];\n\n    if (!id) {\n        return;\n    }\n\n    // åˆ é™¤å­˜æ”¾çš„æ•°æ®\n    delete elData[id];\n\n    // åŒæ—¶åˆ é™¤ DOM ä¸Šçš„å¯¹åº”å±æ€§\n    try {\n        delete el[elIdAttr];\n    } catch (e) {\n        if (el.removeAttribute) {\n            el.removeAttribute(elIdAttr);\n        } else {\n            // IE document èŠ‚ç‚¹ä¼¼ä¹ä¸æ”¯æŒ removeAttribute æ–¹æ³•\n            el[elIdAttr] = null;\n        }\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}